(this["webpackJsonpreact-crud"]=this["webpackJsonpreact-crud"]||[]).push([[0],{287:function(e,t,a){},288:function(e,t,a){},376:function(e,t,a){e.exports=a(589)},382:function(e,t,a){},400:function(e,t,a){},405:function(e,t,a){},409:function(e,t,a){},410:function(e,t,a){},414:function(e,t){},416:function(e,t){},455:function(e,t){},456:function(e,t){},589:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(38),r=a.n(c),l=a(57),o=a(22),s=a(23),m=a(26),u=a(27),d=a(49),p=(a(381),a(382),a(5)),v=a(198),h=a.n(v),g=h.a.create({baseURL:"http://128.199.52.198/api",headers:{"Content-type":"application/json"}}),f=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return g.get("/patients",{params:e})}},{key:"get",value:function(e){return g.get("/patients/".concat(e))}},{key:"create",value:function(e){return g.post("/patients",e)}},{key:"update",value:function(e,t){return g.put("/patients/".concat(e),t)}},{key:"delete",value:function(e){return g.delete("/patients/".concat(e))}},{key:"deleteAll",value:function(){return g.delete("/patients")}},{key:"findBySurname",value:function(e){return g.get("/patients?surname=".concat(e))}},{key:"findObservations",value:function(e){return g.get("/patients/".concat(e,"/obs"))}},{key:"deleteObservation",value:function(e,t){return g.delete("/patients/".concat(e,"/obs?observation=").concat(t))}},{key:"addObservation",value:function(e,t){return g.put("/patients/".concat(e,"/addob"),t)}}]),e}()),b=(a(287),a(17)),E=a.n(b);a(85);E.a.locale("es");var y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(p.a)(n)),n.onChangeSurname=n.onChangeSurname.bind(Object(p.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(p.a)(n)),n.onChangeCity=n.onChangeCity.bind(Object(p.a)(n)),n.onChangeDni=n.onChangeDni.bind(Object(p.a)(n)),n.onChangePhone=n.onChangePhone.bind(Object(p.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(p.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(p.a)(n)),n.savePatient=n.savePatient.bind(Object(p.a)(n)),n.newPatient=n.newPatient.bind(Object(p.a)(n)),n.state={id:null,name:"",surname:"",address:"",city:"",dni:"",phone:"",email:"",description:"",active:!1,submitted:!1},n}return Object(s.a)(a,[{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeSurname",value:function(e){this.setState({surname:e.target.value})}},{key:"onChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"onChangeCity",value:function(e){this.setState({city:e.target.value})}},{key:"onChangeDni",value:function(e){this.setState({dni:e.target.value})}},{key:"onChangePhone",value:function(e){this.setState({phone:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"savePatient",value:function(e){var t=this;if(e.preventDefault(),this.state.name||this.state.name||this.state.name){var a={name:this.state.name,surname:this.state.surname,phone:this.state.phone,address:this.state.address,city:this.state.city,dni:this.state.dni,email:this.state.email,description:this.state.description};f.create(a).then((function(e){t.setState((function(e){return{submitted:!0}}))})).catch((function(e){console.log(e)}))}}},{key:"newPatient",value:function(e){e.preventDefault(),this.setState({id:null,name:"",surname:"",address:"",city:"",dni:"",phone:"",email:"",description:"",active:!1,submitted:!1})}},{key:"render",value:function(){return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},i.a.createElement("form",{autoComplete:"off"},this.state.submitted?i.a.createElement("div",null,i.a.createElement("h4",null,"A\xf1adido correctamente!"),i.a.createElement("button",{className:"btn btn-success",onClick:this.newPatient},"Nuevo")):i.a.createElement("div",null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"title"},"Nombre"),i.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name",placeholder:"Requerido"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"surname"},"Apellidos"),i.a.createElement("input",{type:"text",className:"form-control",id:"surname",required:!0,value:this.state.surname,onChange:this.onChangeSurname,name:"surname",placeholder:"Requerido"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"phone"},"Tel\xe9fono"),i.a.createElement("input",{type:"text",className:"form-control",id:"phone",required:!0,value:this.state.phone,onChange:this.onChangePhone,name:"phone",placeholder:"Requerido"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"address"},"Direcci\xf3n"),i.a.createElement("input",{type:"text",className:"form-control",id:"address",value:this.state.address,onChange:this.onChangeAddress,name:"address",autoComplete:"nope"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"city"},"Ciudad"),i.a.createElement("input",{type:"text",className:"form-control",id:"city",value:this.state.city,onChange:this.onChangeCity,name:"city",autoComplete:"nope"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"dni"},"DNI"),i.a.createElement("input",{type:"text",className:"form-control",id:"dni",value:this.state.dni,onChange:this.onChangeDni,name:"dni"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"email"},"Email"),i.a.createElement("input",{type:"text",className:"form-control",id:"email",value:this.state.email,onChange:this.onChangeEmail,name:"email",autoComplete:"nope"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"description"},"Descripci\xf3n"),i.a.createElement("input",{type:"text",className:"form-control",id:"description",value:this.state.description,onChange:this.onChangeDescription,name:"description"})),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col text-center"},i.a.createElement("button",{style:{marginBottom:"25px",marginTop:"20px"},onClick:this.savePatient,className:"btn btn-secondary"},"A\xf1adir")))))))}}]),a}(n.Component),C=a(44),N=(a(400),a(343)),k=a.n(N);E.a.locale("es");var x=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).clear=function(e){e.preventDefault(),n.sigPad.clear(),n.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{signature:null})}}))},n.trim=function(e){e.preventDefault(),n.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{signature:this.sigPad.getTrimmedCanvas().toDataURL("image/png"),pddate:E()().format()})}}),(function(){n.hanglePDOK()}))},n.onChangeName=n.onChangeName.bind(Object(p.a)(n)),n.onChangeSurname=n.onChangeSurname.bind(Object(p.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(p.a)(n)),n.onChangeCity=n.onChangeCity.bind(Object(p.a)(n)),n.onChangeDni=n.onChangeDni.bind(Object(p.a)(n)),n.onChangePhone=n.onChangePhone.bind(Object(p.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(p.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(p.a)(n)),n.onChangeTutor1=n.onChangeTutor1.bind(Object(p.a)(n)),n.onChangeTutor2=n.onChangeTutor2.bind(Object(p.a)(n)),n.onChangeNIFTutor1=n.onChangeNIFTutor1.bind(Object(p.a)(n)),n.onChangeNIFTutor2=n.onChangeNIFTutor2.bind(Object(p.a)(n)),n.getPatient=n.getPatient.bind(Object(p.a)(n)),n.updateActive=n.updateActive.bind(Object(p.a)(n)),n.updatePatient=n.updatePatient.bind(Object(p.a)(n)),n.deletePatient=n.deletePatient.bind(Object(p.a)(n)),n.state={currentPatient:{id:null,name:"",surname:"",address:"",city:"",dni:"",phone:"",email:"",description:"",active:!1,signature:null,submitted:!1,tutor1:"",tutor2:"",niftutor1:"",niftutor2:"",pddate:"",pdok:!1},message:""},n.sigPad={},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getPatient(this.props.match.params.id)}},{key:"hanglePDOK",value:function(){this.setState((function(e){var t=!!e.currentPatient.name&&!!e.currentPatient.surname&&!!e.currentPatient.address&&!!e.currentPatient.city&&!!e.currentPatient.dni&&!!e.currentPatient.phone&&!!e.currentPatient.signature;return{currentPatient:Object(C.a)({},e.currentPatient,{pdok:t})}}))}},{key:"onChangeName",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{name:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangeSurname",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{surname:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangeAddress",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{address:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangeCity",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{city:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangeDni",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{dni:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangePhone",value:function(e){var t=this,a=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{phone:a})}}),(function(){t.hanglePDOK()}))}},{key:"onChangeEmail",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{email:t})}}))}},{key:"onChangeTutor1",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{tutor1:t})}}))}},{key:"onChangeTutor2",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{tutor2:t})}}))}},{key:"onChangeNIFTutor1",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{niftutor1:t})}}))}},{key:"onChangeNIFTutor2",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{niftutor2:t})}}))}},{key:"onChangeDescription",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(C.a)({},e.currentPatient,{description:t})}}))}},{key:"getPatient",value:function(e){var t=this;f.get(e).then((function(e){console.log(e.data),console.log(E()().format()),console.log(E()(E()().format()).format("MMMM")),t.setState({currentPatient:Object(C.a)({},e.data,{tutor1:e.data.tutor1||"",tutor2:e.data.tutor2||"",niftutor1:e.data.niftutor1||"",niftutor2:e.data.niftutor2||""})})})).catch((function(e){console.log(e)}))}},{key:"updateActive",value:function(e){var t=this,a={id:this.state.currentPatient.id,name:this.state.currentPatient.name,surname:this.state.currentPatient.surname,address:this.state.currentPatient.address,city:this.state.currentPatient.city,dni:this.state.currentPatient.dni,phone:this.state.currentPatient.phone,email:this.state.currentPatient.email,description:this.state.currentPatient.description,active:this.state.currentPatient.status,signature:this.state.currentPatient.signature,tutor1:this.state.currentPatient.tutor1,tutor2:this.state.currentPatient.tutor2,niftutor1:this.state.currentPatient.niftutor1,niftutor2:this.state.currentPatient.niftutor2,pddate:this.state.currentPatient.pddate,pdok:this.state.currentPatient.pdok};f.update(this.state.currentPatient.id,a).then((function(a){t.setState((function(t){return{currentPatient:Object(C.a)({},t.currentPatient,{active:e})}}))})).catch((function(e){console.log(e)}))}},{key:"updatePatient",value:function(e){var t=this;e.preventDefault(),f.update(this.state.currentPatient.id,this.state.currentPatient).then((function(e){console.log(e.data),t.setState({message:"Paciente actualizado correctamente!"})})).catch((function(e){console.log(e)}))}},{key:"deletePatient",value:function(){var e=this;f.delete(this.state.currentPatient.id).then((function(t){e.props.history.push("/patients")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.currentPatient;return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},t.pddate,i.a.createElement("form",{autoComplete:"off"},t?i.a.createElement("div",null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"name"},"Nombre"),i.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:t.name,onChange:this.onChangeName,name:"name"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"surname"},"Apellidos"),i.a.createElement("input",{type:"text",className:"form-control",id:"surname",value:t.surname,onChange:this.onChangeSurname,name:"surname"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"phone"},"Tel\xe9fono"),i.a.createElement("input",{type:"text",className:"form-control",id:"phone",required:!0,value:t.phone,onChange:this.onChangePhone,name:"phone"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"address"},"Direcci\xf3n"),i.a.createElement("input",{type:"text",className:"form-control",id:"address",required:!0,value:t.address,onChange:this.onChangeAddress,name:"address",autoComplete:"nope"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"city"},"Ciudad"),i.a.createElement("input",{type:"text",className:"form-control",id:"city",required:!0,value:t.city,onChange:this.onChangeCity,name:"city",autoComplete:"nope"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"dni"},"DNI"),i.a.createElement("input",{type:"text",className:"form-control",id:"dni",required:!0,value:t.dni,onChange:this.onChangeDni,name:"dni"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"email"},"Email"),i.a.createElement("input",{type:"text",className:"form-control",id:"email",value:t.email,onChange:this.onChangeEmail,name:"email",autoComplete:"nope"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"description"},"Descripci\xf3n"),i.a.createElement("input",{type:"text",className:"form-control",id:"description",value:t.description,onChange:this.onChangeDescription,name:"description"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"tutor1"},"Tutor 1"),i.a.createElement("input",{type:"text",className:"form-control",id:"tutor1",value:t.tutor1,onChange:this.onChangeTutor1,name:"tutor1",autoComplete:"nope"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"niftutor1"},"NIF Tutor 1"),i.a.createElement("input",{type:"text",className:"form-control",id:"niftutor1",value:t.niftutor1||"",onChange:this.onChangeNIFTutor1,name:"niftutor1",autoComplete:"nope"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"tutor2"},"Tutor 2"),i.a.createElement("input",{type:"text",className:"form-control",id:"tutor2",value:t.tutor2||"",onChange:this.onChangeTutor2,name:"tutor2",autoComplete:"nope"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"niftutor2"},"NIF Tutor 2"),i.a.createElement("input",{type:"text",className:"form-control",id:"niftutor2",value:t.niftutor2||"",onChange:this.onChangeNIFTutor2,name:"niftutor2",autoComplete:"nope"})),i.a.createElement("div",{className:"row",style:{marginTop:"100px"}},i.a.createElement("div",{className:"col"},i.a.createElement("p",null,"En base a la presente clausula HASHIME OTOMO HIDALGO (CENTRO OTOMO) solicita su consentimiento a:"))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-8"},"TUTOR: ",t.tutor1),i.a.createElement("div",{className:"col-4"},"NIF: ",t.niftutor1)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-8"},"TUTOR: ",t.tutor2),i.a.createElement("div",{className:"col-4"},"NIF: ",t.niftutor2)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-8"},"PACIENTE: ",t.name," ",t.surname),i.a.createElement("div",{className:"col-4"},"NIF: ",t.dni)),i.a.createElement("div",{className:"row",style:{marginTop:"40px"}},i.a.createElement("div",{className:"col"},i.a.createElement("p",null,"Para el tratamient de sus datos personales seg\xfan lo dispuesto en los art\xedculos 6 y 9 del Reglamento (UE) 2016/679 inform\xe1ndole que el tratamiento de sus datos tiene su base en la prestaci\xf3n de servicios sanitarios (Centro Otomo)"),i.a.createElement("p",null,"En cumplimiento del art\xedculo 13 del Reglamento Europeo de Protecci\xf3n de Datos, he sido informado/a de que mis datos personales pasar\xe1n a formar parte del sistema de tratamiento PACIENTES."),i.a.createElement("p",null,"La finalidad del tratamiento es la \u201cgesti\xf3n de los datos de los pacientes y de su historia cl\xednica y de las tareas administrativas derivadas de la prestaci\xf3n asistencial\u201d"),i.a.createElement("p",null,"Sus datos podr\xe1n ser cedidos a entidades sanitarias por imperativo legal y la documentaci\xf3n cl\xednica ser\xe1 conservada durante el tiempo necesario para prestar la debida asistencia al paciente y, como m\xednimo, cinco a\xf1os contados desde la fecha del alta del proceso asistencial."),i.a.createElement("p",null,"Podr\xe1 ejercitar los derechos de OPOSICI\xd3N, ACCESO, RECTIFICACI\xd3N, LIMITACI\xd3N DEL TRATAMIENTO, SUPRESI\xd3N Y PORTABILIDAD mediante escrito dirigido a HASHIME OTOMO HIDALGO (CENTRO OTOMO). RUA CASTELAO 13-15 BAJO 2 27001-LUGO acompa\xf1ando fotocopia de DNI o en su defecto documento que acredite su debida identidad o bien con car\xe1cter previo a tal actuaci\xf3n solicitar con las mismas se\xf1as que le sean remitidos los impresos que el responsable del fichero dispone a tal efecto."))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col",style:{marginBottom:"40px"}},i.a.createElement("p",null,"En LUGO a ",E()(t.pddate).format("D")," de ",E()(t.pddate).format("MMMM")," de 2020"))),i.a.createElement("div",{className:"row suplemtext"},i.a.createElement("div",{className:"col"},"Firmado Paciente/Padre/Madre/Tutor")),i.a.createElement("div",{className:"sigContainer"},i.a.createElement(k.a,{canvasProps:{className:"sigPad"},ref:function(t){e.sigPad=t}})),i.a.createElement("div",{className:"row buttons-margin"},i.a.createElement("div",{className:"col"},i.a.createElement("button",{className:"buttons",onClick:this.clear},"Reset")),i.a.createElement("div",{className:"col"},i.a.createElement("button",{className:"buttons",onClick:this.trim},"Capturar"))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col text-center"},this.state.trimmedDataURL?i.a.createElement("img",{className:"sigImage",src:this.state.trimmedDataURL,alt:"manolito"}):null)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col text-center"},this.state.currentPatient.signature?i.a.createElement("img",{className:"sigImage",src:this.state.currentPatient.signature,alt:"manolito"}):null)),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,i.a.createElement("strong",null,"Estado:")),t.active?"Active":"Inactive"),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,i.a.createElement("strong",null,"Protecci\xf3n de datos:")),t.pdok?"OK":"NO"),i.a.createElement("div",{className:"action-buttons"},t.active?i.a.createElement("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updateActive(!1)}},"Desactivar"):i.a.createElement("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updateActive(!0)}},"Activar"),i.a.createElement("button",{className:"badge badge-danger mr-2",onClick:this.deletePatient},"Eliminar"),i.a.createElement("button",{type:"submit",className:"badge badge-success",onClick:this.updatePatient},"Actualizar"),i.a.createElement("p",null,this.state.message))):i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("p",null,"Please click on a Patient...")))))}}]),a}(n.Component),O=a(63),S=a(621),j=(a(405),a(48)),D=a(123),A=a(21),P=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return g.get("/appointments",{params:e})}},{key:"get",value:function(e){return g.get("/appointments/".concat(e))}},{key:"create",value:function(e){return g.post("/appointments",e)}},{key:"update",value:function(e,t){return g.put("/appointments/".concat(e),t)}},{key:"delete",value:function(e){return g.delete("/appointments/".concat(e))}},{key:"deleteAll",value:function(){return g.delete("/appointments")}},{key:"findBySurname",value:function(e){return g.get("/appointments?surname=".concat(e))}},{key:"findByPatientId",value:function(e){return g.get("/appointments/patient/".concat(e))}},{key:"findByDate",value:function(e){return g.get("/appointments/scheduled?date=".concat(e))}},{key:"findByDateNext",value:function(e){return g.get("/appointments/scheduled/next?date=".concat(e))}}]),e}()),I=a(100),w=a.n(I),T=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleKeyPress=function(e){"Enter"===e.key&&n.retrievePatients()},n.onChangeSearchSurname=n.onChangeSearchSurname.bind(Object(p.a)(n)),n.retrievePatients=n.retrievePatients.bind(Object(p.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(p.a)(n)),n.handlePageSizeChange=n.handlePageSizeChange.bind(Object(p.a)(n)),n.toggleMenu=n.toggleMenu.bind(Object(p.a)(n)),n.addAppointment=n.addAppointment.bind(Object(p.a)(n)),n.makeAppointment=n.makeAppointment.bind(Object(p.a)(n)),n.state={patients:[],searchSurname:"",page:1,count:0,pageSize:9},n.pageSizes=[3,6,9],n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrievePatients()}},{key:"onChangeSearchSurname",value:function(e){var t=e.target.value;this.setState({searchSurname:t})}},{key:"getRequestParams",value:function(e,t,a){var n={};return e&&(n.surname=e),t&&(n.page=t-1),a&&(n.size=a),n}},{key:"retrievePatients",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.page,i=t.pageSize,c=this.getRequestParams(a,n,i);f.getAll(c).then((function(t){var a=t.data,n=a.patients,i=a.totalPages;e.setState({patients:n,count:i})})).catch((function(e){console.log(e)}))}},{key:"handlePageChange",value:function(e,t){var a=this;this.setState({page:t},(function(){a.retrievePatients()}))}},{key:"handlePageSizeChange",value:function(e){var t=this;this.setState({pageSize:e.target.value,page:1},(function(){t.retrievePatients()}))}},{key:"toggleMenu",value:function(e){var t=Object(O.a)(this.state.patients),a=Object(C.a)({},t[e.target.getAttribute("inx")]);a.expanded=!a.expanded,t[e.target.getAttribute("inx")]=a,this.setState({patients:t})}},{key:"makeAppointment",value:function(e){console.log(this.props.match.params.id),console.log(this.props.history.push("/appointments/")),console.log("--------------------------------------------------");var t=this.props.match.params.id.split("_");console.log(t),console.log("kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk"),console.log(e.target.getAttribute("patientid"))}},{key:"addAppointment",value:function(e){var t=this,a=this.props.match.params.id.split("_"),n={madeBy:e.target.getAttribute("patientid"),hour:a[0],date:a[1],service:e.target.getAttribute("serviceid"),estate:"pending"};P.create(n).then((function(e){t.props.history.push("/appointments/after/"+a[2])})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.patients,c=t.page,r=t.count,o=t.pageSize;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12 style={{ boxSizing: 'border-box' }}"},i.a.createElement("div",{className:"input-group mb-3",style:{marginTop:"10px"}},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar por apellido",value:a,onChange:this.onChangeSearchSurname,onKeyPress:this.handleKeyPress}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.retrievePatients},"Buscar"))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{id:"accordion"},n&&n.map((function(t,a){return i.a.createElement("div",{className:"card",key:a},i.a.createElement("div",{className:"card-header",id:"heading".concat(a)},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-8 col-md-9",style:{paddingLeft:"0px"}},i.a.createElement("h5",{className:"mb-0"},i.a.createElement("button",{className:"btn btn-link"+(t.expanded?"":" collapsed"),"data-toggle":"collapse","data-target":"#collapse".concat(a),"aria-expanded":t.expanded?"true":"false","aria-controls":"collapse".concat(a),inx:a,onClick:e.toggleMenu},t.surname,",\xa0 ",t.name))),i.a.createElement("div",{className:"col-4 col-md-3"},e.props.match.params.id?i.a.createElement(A.a,{as:D.a},i.a.createElement(j.a,{variant:"secondary",patientid:t.id,serviceid:"Acupuntura",onClick:e.addAppointment},i.a.createElement(w.a,{minDeviceWidth:760},(function(e){return e?"Acupuntura":"Acu"}))),i.a.createElement(A.a.Toggle,{split:!0,variant:"secondary",id:"dropdown-split-basic"}),i.a.createElement(A.a.Menu,null,i.a.createElement(A.a.Item,{patientid:t.id,serviceid:"Psicolog\xeda",onClick:e.addAppointment},"Psicolog\xeda"))):i.a.createElement(A.a,{as:D.a},i.a.createElement(j.a,{variant:"secondary",href:"/addappointment/"+t.id},"Citar"),i.a.createElement(A.a.Toggle,{split:!0,variant:"secondary",id:"dropdown-split-basic"}),i.a.createElement(A.a.Menu,null,i.a.createElement(A.a.Item,{href:"/appointments/patient/"+t.id},"Citas"),i.a.createElement(A.a.Item,{href:"/patients/"+t.id+"/obs"},"Historia"),i.a.createElement(A.a.Divider,null),i.a.createElement(A.a.Item,{href:"/addinvoice/"+t.id},"Nueva factura de acupuntura"),i.a.createElement(A.a.Divider,null),i.a.createElement(A.a.Item,{href:"/addinvoicepsico/"+t.id},"Nueva factura de psicolog\xeda"),i.a.createElement(A.a.Divider,null),i.a.createElement(A.a.Item,{href:"/patients/"+t.id},"Editar")))))),i.a.createElement("div",{id:"collapse".concat(a),className:"collapse"+(t.expanded?" show":""),"aria-labelledby":"heading".concat(a),"data-parent":"#accordion"},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-8 col-sm-10"},i.a.createElement("p",null,t.address),i.a.createElement("p",null,t.city),i.a.createElement("p",null,"DNI: ",t.dni),i.a.createElement("p",null,"Tel: ",t.phone),i.a.createElement("p",null,t.email),i.a.createElement("p",{className:"badgePatient"},t.active?i.a.createElement("span",{className:"badge badge-primary"},"Activo"):i.a.createElement("span",{className:"badge badge-danger"},"Inactivo"))),i.a.createElement("div",{className:"col-4 col-sm-2"},i.a.createElement(l.b,{type:"button",to:"/patients/"+t.id,className:"btn btn-secondary"},"Editar"))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12 col-sm-12"},i.a.createElement("p",null,"Notas: ",t.description))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12 col-sm-12"},i.a.createElement("p",null,"Registrado: ",E()(t.createdAt).format("DD-MM-YYYY hh:mm:ss")))))))}))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"paging"},i.a.createElement("div",null,i.a.createElement("span",{className:"selectText"},"Refs por p\xe1gina: "),i.a.createElement("select",{onChange:this.handlePageSizeChange,value:o},this.pageSizes.map((function(e){return i.a.createElement("option",{key:e,value:e},e)})))),i.a.createElement("div",null,i.a.createElement("div",{className:"bbb"},i.a.createElement(S.a,{className:"my-3",count:r,page:c,siblingCount:1,boundaryCount:1,variant:"outlined",shape:"rounded",onChange:this.handlePageChange}))))),i.a.createElement("div",{className:"col-12"})))}}]),a}(n.Component),M=a(69),Y=a(59),F=a(619),B=a(153),R=a(77),z=(a(409),function(e){var t,a,c,r,o,s=Object(n.useState)(!1),m=Object(B.a)(s,2),u=m[0],d=m[1],p=function(){return d(!1)},v=Object(I.useMediaQuery)({query:"(max-width: 760px)"}),h=e.appointment,g=h.service,f=h.estate,b=h.madeBy;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:function(e,t,a){switch(e){case"Acupuntura":switch(t){case"pending":switch(a.pdok){case!0:return{backgroundColor:"#bde4ea",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};case!1:return{backgroundColor:"#bde4ea",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",border:"2px solid red"};default:return{}}case"fulfilled":return{backgroundColor:"#bde400",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};case"cancelled":return{backgroundColor:"#ff4d4d",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};default:return{}}case"Psicolog\xeda":switch(t){case"pending":switch(a.pdok){case!0:return{backgroundColor:"#f4c9c9",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};case!1:return{backgroundColor:"#f4c9c9",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",border:"2px solid red"};default:return{}}case"fulfilled":return{backgroundColor:"#bde400",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};case"cancelled":return{backgroundColor:"#ff4d4d",height:"40px",marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"};default:return{}}default:return{}}}(g,f,b),onClick:function(){return d(!0)}},v?(null===(t=e.appointment.madeBy)||void 0===t?void 0:t.name.substring(0,1))+(null===(a=e.appointment.madeBy)||void 0===a?void 0:a.surname.substring(0,1)):null===(c=e.appointment.madeBy)||void 0===c?void 0:c.name),i.a.createElement(R.a,{show:u,onHide:p},i.a.createElement(R.a.Header,{closeButton:!0},i.a.createElement(R.a.Title,null,null===(r=e.appointment.madeBy)||void 0===r?void 0:r.name," ",null===(o=e.appointment.madeBy)||void 0===o?void 0:o.surname)),i.a.createElement(R.a.Body,null,i.a.createElement("p",null,e.appointment.service),i.a.createElement("br",null),i.a.createElement("small",null,"creada: ",E()(e.appointment.createdAt).fromNow()),i.a.createElement("br",null),i.a.createElement("small",null,"xxx: ",e.appointment.madeBy.signature?"SI":"NO")),i.a.createElement(R.a.Footer,null,"pending"===e.appointment.estate?i.a.createElement("div",{className:"flex-container"},i.a.createElement("div",null,i.a.createElement(A.a,null,i.a.createElement(A.a.Toggle,{variant:"danger",id:"dropdown-basic"},"Cancelar"),i.a.createElement(A.a.Menu,null,i.a.createElement(A.a.Item,{variant:"danger",aid:e.appointment.id,arrindx:e.index,indexdate:e.indexdate,onClick:function(t){p(),e.cancelAppointment(t)}},"Cancelar la cita (definitivamente)")))),i.a.createElement("div",null,e.appointment.madeBy.signature?i.a.createElement(j.a,{variant:"primary",aid:e.appointment.id,arrindx:e.index,indexdate:e.indexdate,onClick:function(t){p(),e.fulfillAppointment(t)}},"Confirmar"):i.a.createElement(l.b,{to:{pathname:"/patients/"+e.appointment.madeBy._id,state:{invoice:"1",xxx:"2"},myCustomProps:"3"}},"Cumplimentar PD"))):"","fulfilled"===e.appointment.estate?i.a.createElement("div",null,i.a.createElement(A.a,null,i.a.createElement(A.a.Toggle,{variant:"danger",id:"dropdown-basic"},"Cancelar"),i.a.createElement(A.a.Menu,null,i.a.createElement(A.a.Item,{variant:"danger",aid:e.appointment.id,arrindx:e.index,indexdate:e.indexdate,onClick:function(t){p(),e.cancelAppointment(t)}},"Cancelar la cita (definitivamente)")))):"")))});a(410);E.a.locale("es");var L=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).deleteAppointment=function(e,t){console.log("---------- analizar: usar i o id de mongodb en key ----------------"),console.log(e),console.log(t),console.log("-------------------------------------------------------------------"),P.delete(t).then((function(t){n.setState((function(t){return{appointments:t.appointments.filter((function(t,a){return e!==a}))}}))})).catch((function(e){console.log(e)}))},n.redirectPatients=function(e,t,a){var i=e+"_"+E()(n.state.selectedDate).add(t,"days").format("DD-MM-YYYY")+"_"+a;n.props.history.push("/patients/appoint/"+i)},n.handleDateChange=n.handleDateChange.bind(Object(p.a)(n)),n.retrieveAppointments=n.retrieveAppointments.bind(Object(p.a)(n)),n.addAppointment=n.addAppointment.bind(Object(p.a)(n)),n.deleteAppointment=n.deleteAppointment.bind(Object(p.a)(n)),n.previousDates=n.previousDates.bind(Object(p.a)(n)),n.followingDates=n.followingDates.bind(Object(p.a)(n)),n.fulfillAppointment=n.fulfillAppointment.bind(Object(p.a)(n)),n.cancelAppointment=n.cancelAppointment.bind(Object(p.a)(n)),n.redirectPatients=n.redirectPatients.bind(Object(p.a)(n)),n.state={id:null,apointee:"fff",selectedDate:E()(),appointments:[],service:"Acupuntura"},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.selected?this.setState({selectedDate:E()(this.props.match.params.selected,"DD-MM-YYYY")},(function(){e.retrieveAppointments()})):this.setState({selectedDate:E()()},(function(){e.retrieveAppointments()}))}},{key:"componentDidUpdate",value:function(e,t){}},{key:"retrieveAppointments",value:function(){var e=this,t=this.state.selectedDate;P.findByDateNext(t.format("DD/MM/YYYY")).then((function(t){var a=t.data.nextFiveDates;e.setState({appointments:a})})).catch((function(e){console.log(e)}))}},{key:"handleDateChange",value:function(e){var t=this;this.setState({selectedDate:e},(function(){t.retrieveAppointments()}))}},{key:"addAppointment",value:function(e){var t=this;console.log("Esto no se ejecuta NUNCA");var a={surname:this.props.match.params.surname,hour:e.target.getAttribute("inx"),date:this.state.selectedDate.format("DD/MM/YYYY"),service:this.state.service,estate:"pending"};P.create(a).then((function(e){t.setState((function(t){return{appointments:t.appointments.concat(e.data)}}))})).catch((function(e){console.log(e)}))}},{key:"previousDates",value:function(e){var t=this;this.setState({selectedDate:E()(this.state.selectedDate,"DD-MM-YYYY").add(-5,"days")},(function(){t.retrieveAppointments()}))}},{key:"followingDates",value:function(e){var t=this;this.setState({selectedDate:E()(this.state.selectedDate,"DD-MM-YYYY").add(5,"days")},(function(){t.retrieveAppointments()}))}},{key:"cancelAppointment",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx"),i=e.target.getAttribute("indexdate");P.update(a,{estate:"cancelled"}).then((function(e){t.setState((function(t){var a=Object(O.a)(t.appointments);return a[i][n]=e.data,{appointments:a}}))})).catch((function(e){console.log(e)}))}},{key:"fulfillAppointment",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx"),i=e.target.getAttribute("indexdate");P.update(a,{estate:"fulfilled"}).then((function(e){t.setState((function(t){var a=Object(O.a)(t.appointments);return a[i][n]=e.data,{appointments:a}}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t={border:"1px solid lightgrey",minHeight:"80px"},a={border:"1px solid lightgrey"},n={backgroundColor:"lightgrey",width:"100px"},c={height:"40px",display:"flex",justifyContent:"center",alignItems:"center"},r=this.state,l=r.appointments,o=r.selectedDate;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-5"},i.a.createElement(Y.a,{libInstance:E.a,utils:M.a},i.a.createElement(F.a,{margin:"normal",id:"date-picker-dialog",label:"Fecha",format:"DD/MM/yyyy",value:this.state.selectedDate,onChange:this.handleDateChange,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}}))),i.a.createElement("div",{className:"col-7"},i.a.createElement("div",{style:{paddingTop:"25px"}},i.a.createElement(D.a,null,i.a.createElement(j.a,{variant:"secondary",onClick:this.previousDates},"Anteriores"),i.a.createElement(j.a,{variant:"secondary",onClick:this.followingDates},"Siguientes"))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-2 col-sm-1 padding-0",style:{backgroundColor:"lightgrey"}}),Array.from({length:5},(function(e,t){return i.a.createElement("div",{className:"col col-sm",key:t,style:a},E()(o,"DD-MM-YYYY").add(t,"days").format("DD"))}))),["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00"].map((function(a){return i.a.createElement("div",{className:"row",key:a},i.a.createElement("div",{className:"col-2 col-sm-1 padding-0",style:n},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-2"},a),i.a.createElement("div",{style:c,className:"col-10"},"\xa0"))),l&&l.map((function(n,c){return i.a.createElement("div",{className:"col col-sm padding-0",style:t,key:c,onClick:function(){e.redirectPatients(a,c,E()(e.state.selectedDate,"DD-MM-YYYY").format("DD-MM-YYYY"))}},n&&n.map((function(t,n){return a===t.hour||a===t.hour?i.a.createElement("div",{key:n,className:"appointmentItem"},i.a.createElement("div",{onClick:function(e){e.stopPropagation()}},i.a.createElement(z,{appointment:t,index:n,indexdate:c,fulfillAppointment:e.fulfillAppointment,cancelAppointment:e.cancelAppointment}))):""})))})))})),i.a.createElement("p",null,"\xa0"))))}}]),a}(n.Component),q=a(225),K=a(150),V=a(89),U=a(213);E.a.locale("es");var H=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).deleteAppointment=function(e,t){console.log("---------- analizar: usar i o id de mongodb en key ----------------"),console.log(e),console.log(t),console.log("-------------------------------------------------------------------"),P.delete(t).then((function(t){console.log(t.data),n.setState((function(t){return{appointments:t.appointments.filter((function(t,a){return e!==a}))}}))})).catch((function(e){console.log(e)}))},n.handleDateChange=n.handleDateChange.bind(Object(p.a)(n)),n.retrieveAppointments=n.retrieveAppointments.bind(Object(p.a)(n)),n.addAppointment=n.addAppointment.bind(Object(p.a)(n)),n.deleteAppointment=n.deleteAppointment.bind(Object(p.a)(n)),n.setService=n.setService.bind(Object(p.a)(n)),n.state={id:null,apointee:"",selectedDate:E()(),appointments:[],service:"Acupuntura"},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveAppointments()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"retrieveAppointments",value:function(){var e=this,t=this.state.selectedDate;P.findByDate(t.format("DD/MM/YYYY")).then((function(t){var a=t.data.appointments;e.setState({appointments:a})})).catch((function(e){console.log(e)}))}},{key:"handleDateChange",value:function(e){var t=this;this.setState({selectedDate:e},(function(){t.retrieveAppointments()}))}},{key:"addAppointment",value:function(e){var t=this,a={hour:e.target.getAttribute("inx"),date:this.state.selectedDate.format("DD-MM-YYYY"),service:this.state.service,madeBy:this.props.match.params.id};P.create(a).then((function(e){t.setState((function(t){return{appointments:t.appointments.concat(e.data)}}))})).catch((function(e){console.log(e)}))}},{key:"setService",value:function(e){this.setState({service:e.target.getAttribute("service")})}},{key:"render",value:function(){var e=this,t={border:"1px solid lightgrey"},a={backgroundColor:"lightgrey"},n={backgroundColor:"#bde4ea",margin:"5px"},c={backgroundColor:"#f4c9c9",margin:"5px"},r=this.state.appointments;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-5"},i.a.createElement(Y.a,{libInstance:E.a,utils:M.a},i.a.createElement(F.a,{margin:"normal",id:"date-picker-dialog",label:"Fecha",format:"DD/MM/yyyy",minDate:E()(),value:this.state.selectedDate,onChange:this.handleDateChange,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}}))),i.a.createElement("div",{className:"col-7"},i.a.createElement("div",{style:{paddingTop:"25px"}},i.a.createElement(K.a,null,i.a.createElement(V.a,{as:K.a.Prepend,variant:"outline-secondary",title:"Servicio",id:"input-group-dropdown-1"},i.a.createElement(A.a.Item,{href:"#",service:"Acupuntura",onClick:this.setService},"Acupuntura"),i.a.createElement(A.a.Item,{href:"#",service:"Psicolog\xeda",onClick:this.setService},"Psicolog\xeda"),i.a.createElement(A.a.Divider,null),i.a.createElement(A.a.Item,{href:"#"},"Otros")),i.a.createElement(U.a,{"aria-describedby":"basic-addon1",value:this.state.service,readOnly:!0}))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},Array.from({length:12},(function(l,o){return i.a.createElement("div",{className:"row",key:o},i.a.createElement("div",{className:"col-2",style:a},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-2"},(o+9).toString()+":00"),i.a.createElement("div",{className:"col-10"},i.a.createElement("button",{style:{marginLeft:"0px"},inx:(o+9).toString()+":00",onClick:e.addAppointment,className:"btn btn-secondary"},"+")))),i.a.createElement("div",{className:"col-10",style:t},r&&r.map((function(t,a){return(o+9).toString()+":00"===t.hour?i.a.createElement(q.a,{onClose:function(){return e.deleteAppointment(a,t.id)},style:"Acupuntura"===t.service?n:c,key:a},i.a.createElement(q.a.Header,null,i.a.createElement("img",{src:"holder.js/20x20?text=%20",className:"rounded mr-2",alt:""}),i.a.createElement("strong",{className:"mr-auto"},t.service),i.a.createElement("small",null,E()(t.createdAt).fromNow())),i.a.createElement(q.a.Body,null,t.madeBy.surname,", ",t.madeBy.name)):""}))))})),i.a.createElement("p",null,"\xa0"))))}}]),a}(n.Component),G=a(62),_=a(346),W=a(265),J=a(151);var X=function(e){var t=Object(n.useState)(E()()),a=Object(B.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(E()()),o=Object(B.a)(l,2),s=o[0],m=o[1],u=Object(n.useState)("pending"),d=Object(B.a)(u,2),p=d[0],v=d[1];function h(e){console.log(e.target.getAttribute("filter")),v(e.target.getAttribute("filter"))}return i.a.createElement(i.a.Fragment,null,i.a.createElement(j.a,{variant:"primary",onClick:e.handleShow},"Filtrar"),i.a.createElement(R.a,{show:e.show,onHide:e.handleClose},i.a.createElement(R.a.Header,{closeButton:!0},i.a.createElement(R.a.Title,null,"Filtrar citas")),i.a.createElement(R.a.Body,null,i.a.createElement(_.a,null,i.a.createElement(W.a,null,i.a.createElement(J.a,{xs:6,md:4},i.a.createElement(Y.a,{libInstance:E.a,utils:M.a},i.a.createElement(F.a,{margin:"normal",id:"date-picker-dialog-1",format:"DD/MM/yyyy",value:c,onChange:r,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}}))),i.a.createElement(J.a,{xs:6,md:4},i.a.createElement(Y.a,{libInstance:E.a,utils:M.a},i.a.createElement(F.a,{margin:"normal",id:"date-picker-dialog-2",format:"DD/MM/yyyy",value:s,onChange:m,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}})))),i.a.createElement(W.a,null,i.a.createElement(J.a,{xs:12,md:8},i.a.createElement(K.a,null,i.a.createElement(V.a,{as:K.a.Prepend,variant:"outline-secondary",title:p,id:"input-group-dropdown-1"},i.a.createElement(A.a.Item,{href:"#",filter:"pending",onClick:h},"Pendientes"),i.a.createElement(A.a.Item,{href:"#",filter:"cancelled",onClick:h},"Canceladas"),i.a.createElement(A.a.Item,{href:"#",filter:"fulfilled",onClick:h},"Cumplidas"),i.a.createElement(A.a.Item,{href:"#",filter:"all",onClick:h},"Todas"))))))),i.a.createElement(R.a.Footer,null,i.a.createElement(j.a,{variant:"secondary",onClick:e.handleClose},"Cerrar"),i.a.createElement(j.a,{variant:"primary",onClick:function(t){e.handleState(p)}},"Filtrar"))))};E.a.locale("es");var Q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleDateChange=n.handleDateChange.bind(Object(p.a)(n)),n.retrieveAppointments=n.retrieveAppointments.bind(Object(p.a)(n)),n.setFilter=n.setFilter.bind(Object(p.a)(n)),n.cancelAppointment=n.cancelAppointment.bind(Object(p.a)(n)),n.fulfillAppointment=n.fulfillAppointment.bind(Object(p.a)(n)),n.handleCloseModal=n.handleCloseModal.bind(Object(p.a)(n)),n.handleShowModal=n.handleShowModal.bind(Object(p.a)(n)),n.handleState=n.handleState.bind(Object(p.a)(n)),n.state={id:n.props.match.params.id,filter:"pending",selectedDate:E()(),appointments:[],service:"Acupuntura",show:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log("kkkkkkkkkkkkkkk"),this.retrieveAppointments()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"retrieveAppointments",value:function(){var e=this,t=this.state.id;P.findByPatientId(t).then((function(t){var a=t.data.appointments;e.setState({appointments:a})})).catch((function(e){console.log(e)}))}},{key:"handleDateChange",value:function(e){var t=this;this.setState({selectedDate:e},(function(){t.retrieveAppointments()}))}},{key:"cancelAppointment",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx");P.update(a,{estate:"cancelled"}).then((function(e){console.log(e.data),t.setState((function(t){var a=Object(O.a)(t.appointments);return a[n]=e.data,{appointments:a}}))})).catch((function(e){console.log(e)}))}},{key:"fulfillAppointment",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx");P.update(a,{estate:"fulfilled"}).then((function(e){console.log(e.data),t.setState((function(t){var a=Object(O.a)(t.appointments);return a[n]=e.data,console.log(a),{appointments:a}}))})).catch((function(e){console.log(e)}))}},{key:"setFilter",value:function(e){this.setState({filter:e.target.getAttribute("filter")})}},{key:"handleState",value:function(e){this.setState({show:!1,filter:e})}},{key:"handleCloseModal",value:function(){this.setState({show:!1})}},{key:"handleShowModal",value:function(){this.setState({show:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.appointments,n=t.filter,c=t.show;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},a&&a.filter((function(e){return"all"===n||e.estate===n})).map((function(t,a){return i.a.createElement(G.a,{style:{marginBottom:"10px",marginTop:"10px"},key:a},i.a.createElement(G.a.Body,null,i.a.createElement(G.a.Title,null,t.service),i.a.createElement(G.a.Subtitle,{className:"mb-2 text-muted"},E()(t.date).format("DD-MM-YYYY"),"\xa0a las ",t.hour),i.a.createElement(G.a.Text,null,t.madeBy.name,"\xa0",t.madeBy.surname,i.a.createElement("br",null),i.a.createElement("small",null,"creada ",E()(t.createdAt).fromNow()),i.a.createElement("br",null),i.a.createElement("small",null,t.id),i.a.createElement("br",null)),"pending"===t.estate?i.a.createElement("div",null,i.a.createElement(G.a.Link,{href:"",aid:t.id,arrindx:a,onClick:e.cancelAppointment},"Cancelar"),i.a.createElement(G.a.Link,{href:"",aid:t.id,arrindx:a,onClick:e.fulfillAppointment},"Cumplir")):"fulfilled"===t.estate?i.a.createElement("span",{className:"badge badge-success"},"Cumplida"):i.a.createElement("span",{className:"badge badge-warning"},"Cancelada")))})),i.a.createElement("p",null,"\xa0"))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{style:{},className:"col-12"},i.a.createElement("div",{className:"d-flex justify-content-center"},i.a.createElement(X,{show:c,handleClose:this.handleCloseModal,handleShow:this.handleShowModal,handleState:this.handleState})),i.a.createElement("p",null,"\xa0"))))}}]),a}(n.Component),$=h.a.create({baseURL:"http://128.199.52.198/api",responseType:"blob"}),Z=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return g.get("/invoices",{params:e})}},{key:"generateExcel",value:function(e){return g.get("/invoices/genexcel",{params:e})}},{key:"downloadExcel",value:function(){return $.get("/invoices/downloadexcel")}},{key:"get",value:function(e){return g.get("/invoices/".concat(e))}},{key:"create",value:function(e){return g.post("/invoices",e)}},{key:"update",value:function(e,t){return g.put("/invoices/".concat(e),t)}},{key:"delete",value:function(e){return g.delete("/invoices/".concat(e))}},{key:"deleteAll",value:function(){return g.delete("/invoices")}},{key:"findBySurname",value:function(e){return g.get("/invoices?surname=".concat(e))}},{key:"findByPatientId",value:function(e){return g.get("/invoices/patient/".concat(e))}},{key:"findByDate",value:function(e){return g.get("/invoices/scheduled?date=".concat(e))}},{key:"findByDateNext",value:function(e){return g.get("/invoices/scheduled/next?date=".concat(e))}}]),e}()),ee=(a(288),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleKeyPress=function(e){"Enter"===e.key&&(console.log("enter press here! "),n.retrieveInvoices())},n.onChangeSearchSurname=n.onChangeSearchSurname.bind(Object(p.a)(n)),n.retrieveInvoices=n.retrieveInvoices.bind(Object(p.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(p.a)(n)),n.handlePageSizeChange=n.handlePageSizeChange.bind(Object(p.a)(n)),n.toggleMenu=n.toggleMenu.bind(Object(p.a)(n)),n.setDate1=n.setDate1.bind(Object(p.a)(n)),n.setDate2=n.setDate2.bind(Object(p.a)(n)),n.cancelInvoice=n.cancelInvoice.bind(Object(p.a)(n)),n.sayHi=n.sayHi.bind(Object(p.a)(n)),n.generateExcel=n.generateExcel.bind(Object(p.a)(n)),n.descExcel=n.descExcel.bind(Object(p.a)(n)),n.state={invoices:[],searchSurname:"",date1:E()().startOf("quarter"),date2:E()(),page:1,count:0,pageSize:6,total:0,numberInvoices:0,numCanInvoices:0,downloadExcel:!1},n.pageSizes=[3,6,9],n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveInvoices()}},{key:"onChangeSearchSurname",value:function(e){var t=e.target.value;this.setState({searchSurname:t})}},{key:"getRequestParams",value:function(e,t,a,n,i){var c={};return e&&(c.surname=e),t&&(c.date1=t),a&&(c.date2=a),n&&(c.page=n-1),i&&(c.size=i),c}},{key:"generateExcel",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.date1,i=t.date2,c=t.page,r=t.pageSize,l=this.getRequestParams(a,n.format("DD-MM-YYYY"),i.format("DD-MM-YYYY"),c,r);Z.generateExcel(l).then((function(t){var a=t.data.estate;e.setState({downloadExcel:a})})).catch((function(e){console.log(e)}))}},{key:"descExcel",value:function(){Z.downloadExcel().then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","Acupuntura.xlsx"),document.body.appendChild(a),a.click()})).catch((function(e){console.log(e)}))}},{key:"retrieveInvoices",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.date1,i=t.date2,c=t.page,r=t.pageSize,l=this.getRequestParams(a,n.format("DD-MM-YYYY"),i.format("DD-MM-YYYY"),c,r);Z.getAll(l).then((function(t){var a=t.data,n=a.invoices,i=a.totalPages,c=a.totalInvoices,r=a.numberInvoices,l=a.numCanInvoices;console.log(n),e.setState({invoices:n,count:i,total:c,numberInvoices:r,numCanInvoices:l})})).catch((function(e){console.log(e)}))}},{key:"handlePageChange",value:function(e,t){var a=this;this.setState({page:t},(function(){a.retrieveInvoices()}))}},{key:"handlePageSizeChange",value:function(e){var t=this;this.setState({pageSize:e.target.value,page:1},(function(){t.retrieveInvoices()}))}},{key:"toggleMenu",value:function(e){var t=Object(O.a)(this.state.invoices),a=Object(C.a)({},t[e.target.getAttribute("inx")]);a.expanded=!a.expanded,t[e.target.getAttribute("inx")]=a,this.setState({invoices:t})}},{key:"setDate1",value:function(e){var t=this;this.setState({date1:e,pageSize:3,page:1,count:0},(function(){t.retrieveInvoices()}))}},{key:"setDate2",value:function(e){var t=this;this.setState({date2:e,pageSize:3,page:1,count:0},(function(){t.retrieveInvoices()}))}},{key:"cancelInvoice",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx");Z.update(a,{estate:"cancelled"}).then((function(e){t.setState((function(t){var a=Object(O.a)(t.invoices);a[n]=e.data;var i=t.total;i-=e.data.total;var c=t.numberInvoices;c-=1;var r=t.numCanInvoices;return{invoices:a,total:i,numberInvoices:c,numCanInvoices:r+=1,downloadExcel:!1}}))})).catch((function(e){console.log(e)}))}},{key:"sayHi",value:function(){console.log("hi")}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.invoices,c=t.date1,r=t.date2,o=t.page,s=t.count,m=t.pageSize,u=t.total,d=t.numberInvoices,p=t.numCanInvoices,v=t.downloadExcel;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"input-group mb-3",style:{marginTop:"10px"}},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar por apellido",value:a,onChange:this.onChangeSearchSurname,onKeyPress:this.handleKeyPress}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.retrieveInvoices},"Buscar"))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-6"},i.a.createElement(Y.a,{libInstance:E.a,utils:M.a},i.a.createElement(F.a,{margin:"normal",id:"date-picker-dialog-1",format:"DD/MM/yyyy",value:c,onChange:this.setDate1,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}}))),i.a.createElement("div",{className:"col-6"},i.a.createElement(Y.a,{libInstance:E.a,utils:M.a},i.a.createElement(F.a,{margin:"normal",id:"date-picker-dialog-2",format:"DD/MM/yyyy",value:r,onChange:this.setDate2,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}})))),i.a.createElement("div",{className:"row",style:{marginTop:"10px"}},i.a.createElement("div",{className:"col-7 col-sm-9"},i.a.createElement("span",null,"Total: ",u," | #: ",d," | X: ",p)),i.a.createElement("div",{className:"col-5 col-sm-3"},i.a.createElement(j.a,{variant:"secondary",size:"sm",onClick:v?this.descExcel:this.generateExcel,className:"float-right"},v?"Descargar":"Generar Excel"))),n&&n.map((function(t,a){return i.a.createElement("div",{className:"row",key:a,style:{marginTop:"10px"}},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"card",style:{marginBottom:"10px"},key:a},i.a.createElement("div",{className:"card-header"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-8"},t.inumber,"/",E()(t.createdAt).format("YYYY"),"\xa0\xa0\xa0",E()(t.date).format("DD-MM-YYYY")),i.a.createElement("div",{className:"col-4"},"emitted"===t.estate?i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement(V.a,{variant:"danger",size:"sm",id:"dropdown-basic-button",title:"Cancelar"},i.a.createElement(A.a.Item,{href:"",aid:t.id,arrindx:a,onClick:e.cancelInvoice},"Irreversiblemente"))):"cancelled"===t.estate?i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement("span",{className:"badge badge-danger"},"Cancelada")):i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement("span",{className:"badge badge-danger"},"Pagada"))))),i.a.createElement("div",{className:"card-body"},i.a.createElement("h6",{className:"card-title"},t.name.charAt(0).toUpperCase()+t.name.slice(1),"\xa0",t.surname.charAt(0).toUpperCase()+t.surname.slice(1)),i.a.createElement("p",{className:"card-text"},t.address,"\xa0-\xa0",t.city,i.a.createElement("br",null),t.dni),i.a.createElement("div",{className:"row",style:{borderRadius:"3px",background:"#F7F7F7",border:"1px solid lightgrey"}},i.a.createElement("div",{className:"col-6 col-sm-6"},i.a.createElement("span",null,"Concepto")),i.a.createElement("div",{className:"col-0 col-sm-1 d-none d-sm-block",style:{paddingLeft:"0px",paddingRight:"0px"}},i.a.createElement("span",null,"Ses")),i.a.createElement("div",{className:"col-2 col-sm-2",style:{paddingLeft:"0px",paddingRight:"0px"}},"Base"),i.a.createElement("div",{className:"col-1 col-sm-1",style:{paddingLeft:"0px",paddingRight:"0px"}},i.a.createElement("span",null,"IVA")),i.a.createElement("div",{className:"col-3 col-sm-2"},i.a.createElement("span",null,"Total"))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-6 col-sm-6"},i.a.createElement(w.a,{maxWidth:576},(function(e){return e?i.a.createElement("span",null,t.sessions+"x "+t.concept):i.a.createElement("span",null,t.concept)}))),i.a.createElement("div",{className:"col-0 col-sm-1 d-none d-sm-block",style:{paddingLeft:"0px",paddingRight:"0px"}},i.a.createElement("span",null,t.sessions)),i.a.createElement("div",{className:"col-2 col-sm-2",style:{paddingLeft:"0px",paddingRight:"0px"}},i.a.createElement("span",null,t.base)),i.a.createElement("div",{className:"col-1 col-sm-1",style:{paddingLeft:"0px",paddingRight:"0px"}},i.a.createElement("span",null,t.iva)),i.a.createElement("div",{className:"col-3 col-sm-2"},i.a.createElement("span",null,t.total))),i.a.createElement("hr",null),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-6"},i.a.createElement(w.a,{maxWidth:576},(function(e){return e?i.a.createElement(l.b,{to:{pathname:"/invoicesmobile/pdf/"+t.inumber,state:{invoice:t,xxx:t.name},myCustomProps:"invoice"}},"Descargar PDF"):i.a.createElement(l.b,{to:{pathname:"/invoices/pdf/"+t.inumber,state:{invoice:t,xxx:t.name},myCustomProps:"invoice"}},"Ver PDF")}))),i.a.createElement("div",{className:"col-6 d-flex justify-content-end",style:{paddingTop:"3px"}},i.a.createElement("small",null,t.emittedTo?t.emittedTo._id:"ficha eliminada")))))))})),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12",style:{marginBottom:"10px"}},i.a.createElement("div",{className:"paging"},i.a.createElement("div",null,i.a.createElement("span",{className:"selectText"},"Refs por p\xe1gina: "),i.a.createElement("select",{onChange:this.handlePageSizeChange,value:m},this.pageSizes.map((function(e){return i.a.createElement("option",{key:e,value:e},e)})))),i.a.createElement("div",null,i.a.createElement("div",{className:"bbb"},i.a.createElement(S.a,{className:"my-3",count:s,page:o,siblingCount:1,boundaryCount:1,variant:"outlined",shape:"rounded",onChange:this.handlePageChange})))))))}}]),a}(n.Component)),te=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return g.get("/invoicesp",{params:e})}},{key:"generateExcel",value:function(e){return g.get("/invoicesp/genexcel",{params:e})}},{key:"downloadExcel",value:function(){return $.get("/invoicesp/downloadexcel")}},{key:"get",value:function(e){return g.get("/invoicesp/".concat(e))}},{key:"create",value:function(e){return g.post("/invoicesp",e)}},{key:"update",value:function(e,t){return g.put("/invoicesp/".concat(e),t)}},{key:"delete",value:function(e){return g.delete("/invoicesp/".concat(e))}},{key:"deleteAll",value:function(){return g.delete("/invoicesp")}},{key:"findBySurname",value:function(e){return g.get("/invoicesp?surname=".concat(e))}},{key:"findByPatientId",value:function(e){return g.get("/invoicesp/patient/".concat(e))}},{key:"findByDate",value:function(e){return g.get("/invoicesp/scheduled?date=".concat(e))}},{key:"findByDateNext",value:function(e){return g.get("/invoicesp/scheduled/next?date=".concat(e))}}]),e}()),ae=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleKeyPress=function(e){"Enter"===e.key&&(console.log("enter press here! "),n.retrieveInvoices())},n.onChangeSearchSurname=n.onChangeSearchSurname.bind(Object(p.a)(n)),n.retrieveInvoices=n.retrieveInvoices.bind(Object(p.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(p.a)(n)),n.handlePageSizeChange=n.handlePageSizeChange.bind(Object(p.a)(n)),n.toggleMenu=n.toggleMenu.bind(Object(p.a)(n)),n.setDate1=n.setDate1.bind(Object(p.a)(n)),n.setDate2=n.setDate2.bind(Object(p.a)(n)),n.cancelInvoice=n.cancelInvoice.bind(Object(p.a)(n)),n.sayHi=n.sayHi.bind(Object(p.a)(n)),n.generateExcel=n.generateExcel.bind(Object(p.a)(n)),n.descExcel=n.descExcel.bind(Object(p.a)(n)),n.state={invoices:[],searchSurname:"",date1:E()().startOf("quarter"),date2:E()(),page:1,count:0,pageSize:6,total:0,numberInvoices:0,numCanInvoices:0,downloadExcel:!1},n.pageSizes=[3,6,9],n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveInvoices()}},{key:"onChangeSearchSurname",value:function(e){var t=e.target.value;this.setState({searchSurname:t})}},{key:"getRequestParams",value:function(e,t,a,n,i){var c={};return e&&(c.surname=e),t&&(c.date1=t),a&&(c.date2=a),n&&(c.page=n-1),i&&(c.size=i),c}},{key:"generateExcel",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.date1,i=t.date2,c=t.page,r=t.pageSize,l=this.getRequestParams(a,n.format("DD-MM-YYYY"),i.format("DD-MM-YYYY"),c,r);te.generateExcel(l).then((function(t){var a=t.data.estate;e.setState({downloadExcel:a})})).catch((function(e){console.log(e)}))}},{key:"descExcel",value:function(){te.downloadExcel().then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","Psicologia.xlsx"),document.body.appendChild(a),a.click()})).catch((function(e){console.log(e)}))}},{key:"retrieveInvoices",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.date1,i=t.date2,c=t.page,r=t.pageSize,l=this.getRequestParams(a,n.format("DD-MM-YYYY"),i.format("DD-MM-YYYY"),c,r);te.getAll(l).then((function(t){var a=t.data,n=a.invoices,i=a.totalPages,c=a.totalInvoices,r=a.numberInvoices,l=a.numCanInvoices;e.setState({invoices:n,count:i,total:c,numberInvoices:r,numCanInvoices:l})})).catch((function(e){console.log(e)}))}},{key:"handlePageChange",value:function(e,t){var a=this;this.setState({page:t},(function(){a.retrieveInvoices()}))}},{key:"handlePageSizeChange",value:function(e){var t=this;this.setState({pageSize:e.target.value,page:1},(function(){t.retrieveInvoices()}))}},{key:"toggleMenu",value:function(e){var t=Object(O.a)(this.state.invoices),a=Object(C.a)({},t[e.target.getAttribute("inx")]);a.expanded=!a.expanded,t[e.target.getAttribute("inx")]=a,this.setState({invoices:t})}},{key:"setDate1",value:function(e){var t=this;this.setState({date1:e,pageSize:3,page:1,count:0},(function(){t.retrieveInvoices()}))}},{key:"setDate2",value:function(e){var t=this;this.setState({date2:e,pageSize:3,page:1,count:0},(function(){t.retrieveInvoices()}))}},{key:"cancelInvoice",value:function(e){var t=this,a=e.target.getAttribute("aid"),n=e.target.getAttribute("arrindx");te.update(a,{estate:"cancelled"}).then((function(e){t.setState((function(t){var a=Object(O.a)(t.invoices);a[n]=e.data;var i=t.total;i-=e.data.total;var c=t.numberInvoices;c-=1;var r=t.numCanInvoices;return{invoices:a,total:i,numberInvoices:c,numCanInvoices:r+=1,downloadExcel:!1}}))})).catch((function(e){console.log(e)}))}},{key:"sayHi",value:function(){console.log("hi")}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.invoices,c=t.date1,r=t.date2,o=t.page,s=t.count,m=t.pageSize,u=t.total,d=t.numberInvoices,p=t.numCanInvoices,v=t.downloadExcel;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"input-group mb-3",style:{marginTop:"10px"}},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar por apellido",value:a,onChange:this.onChangeSearchSurname,onKeyPress:this.handleKeyPress}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.retrieveInvoices},"Buscar"))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-6"},i.a.createElement(Y.a,{libInstance:E.a,utils:M.a},i.a.createElement(F.a,{margin:"normal",id:"date-picker-dialog-1",format:"DD/MM/yyyy",value:c,onChange:this.setDate1,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}}))),i.a.createElement("div",{className:"col-6"},i.a.createElement(Y.a,{libInstance:E.a,utils:M.a},i.a.createElement(F.a,{margin:"normal",id:"date-picker-dialog-2",format:"DD/MM/yyyy",value:r,onChange:this.setDate2,cancelLabel:"Cancelar",okLabel:"Aceptar",KeyboardButtonProps:{"aria-label":"change date"}})))),i.a.createElement("div",{className:"row",style:{marginTop:"10px"}},i.a.createElement("div",{className:"col-7 col-sm-9"},i.a.createElement("span",null,"Total: ",u," | #: ",d," | X: ",p)),i.a.createElement("div",{className:"col-5 col-sm-3"},i.a.createElement(j.a,{variant:"secondary",size:"sm",onClick:v?this.descExcel:this.generateExcel,className:"float-right"},v?"Descargar":"Generar Excel"))),n&&n.map((function(t,a){return i.a.createElement("div",{className:"row",key:a,style:{marginTop:"10px"}},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"card",style:{marginBottom:"10px"},key:a},i.a.createElement("div",{className:"card-header"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-8"},t.inumber,"/",E()(t.createdAt).format("YYYY"),"\xa0\xa0\xa0",E()(t.date).format("DD-MM-YYYY")),i.a.createElement("div",{className:"col-4"},"emitted"===t.estate?i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement(V.a,{variant:"danger",size:"sm",id:"dropdown-basic-button",title:"Cancelar"},i.a.createElement(A.a.Item,{href:"",aid:t.id,arrindx:a,onClick:e.cancelInvoice},"Irreversiblemente"))):"cancelled"===t.estate?i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement("span",{className:"badge badge-danger"},"Cancelada")):i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement("span",{className:"badge badge-danger"},"Pagada"))))),i.a.createElement("div",{className:"card-body"},i.a.createElement("h6",{className:"card-title"},t.name.charAt(0).toUpperCase()+t.name.slice(1),"\xa0",t.surname.charAt(0).toUpperCase()+t.surname.slice(1)),i.a.createElement("p",{className:"card-text"},t.address,"\xa0-\xa0",t.city,i.a.createElement("br",null),t.dni),i.a.createElement("div",{className:"row",style:{borderRadius:"3px",background:"#F7F7F7",border:"1px solid lightgrey"}},i.a.createElement("div",{className:"col-6 col-sm-6"},i.a.createElement("span",null,"Concepto")),i.a.createElement("div",{className:"col-3 col-sm-3",style:{paddingLeft:"0px",paddingRight:"0px"}},i.a.createElement("span",null,"Sesiones")),i.a.createElement("div",{className:"col-3 col-sm-3"},i.a.createElement("span",null,"Total"))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-6 col-sm-6"},i.a.createElement("span",null,t.concept)),i.a.createElement("div",{className:"col-3 col-sm-3",style:{paddingLeft:"0px",paddingRight:"0px"}},i.a.createElement("span",null,t.sessions)),i.a.createElement("div",{className:"col-3 col-sm-3"},i.a.createElement("span",null,t.total))),i.a.createElement("hr",null),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-6"},i.a.createElement(w.a,{maxWidth:576},(function(e){return e?i.a.createElement(l.b,{to:{pathname:"/invoicespsicomobile/pdf/"+t.inumber,state:{invoice:t,xxx:t.name},myCustomProps:"invoice"}},"Descargar PDF"):i.a.createElement(l.b,{to:{pathname:"/invoicespsico/pdf/"+t.inumber,state:{invoice:t,xxx:t.name},myCustomProps:"invoice"}},"Ver PDF")}))),i.a.createElement("div",{className:"col-6 d-flex justify-content-end",style:{paddingTop:"3px"}},i.a.createElement("small",null,t.emittedTo?t.emittedTo._id:"ficha eliminada")))))))})),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12",style:{marginBottom:"10px"}},i.a.createElement("div",{className:"paging"},i.a.createElement("div",null,i.a.createElement("span",{className:"selectText"},"Refs por p\xe1gina: "),i.a.createElement("select",{onChange:this.handlePageSizeChange,value:m},this.pageSizes.map((function(e){return i.a.createElement("option",{key:e,value:e},e)})))),i.a.createElement("div",null,i.a.createElement("div",{className:"bbb"},i.a.createElement(S.a,{className:"my-3",count:s,page:o,siblingCount:1,boundaryCount:1,variant:"outlined",shape:"rounded",onChange:this.handlePageChange})))))))}}]),a}(n.Component),ne=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return g.get("/services",{params:e})}},{key:"getAllActivity",value:function(e){return g.get("/services/area",{params:e})}},{key:"get",value:function(e){return g.get("/services/".concat(e))}},{key:"create",value:function(e){return console.log(e),g.post("/services",e)}},{key:"update",value:function(e,t){return g.put("/services/".concat(e),t)}},{key:"delete",value:function(e){return g.delete("/services/".concat(e))}},{key:"deleteAll",value:function(){return g.delete("/services")}},{key:"findBySurname",value:function(e){return g.get("/services?surname=".concat(e))}},{key:"findObservations",value:function(e){return g.get("/services/".concat(e,"/obs"))}},{key:"deleteObservation",value:function(e,t){return g.delete("/services/".concat(e,"/obs?observation=").concat(t))}},{key:"addObservation",value:function(e,t){return g.put("/services/".concat(e,"/addob"),t)}}]),e}()),ie=a(61),ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeConcept=n.onChangeConcept.bind(Object(p.a)(n)),n.onChangeSessions=n.onChangeSessions.bind(Object(p.a)(n)),n.saveInvoice=n.saveInvoice.bind(Object(p.a)(n)),n.newInvoice=n.newInvoice.bind(Object(p.a)(n)),n.state={id:null,emittedTo:n.props.match.params.id,concept:"",sessions:1,services:[],submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveServices()}},{key:"retrieveServices",value:function(){var e=this;ne.getAllActivity({activity:"Acupuntura"}).then((function(t){var a=t.data.data;0===a.length?e.setState({services:[]}):(console.log(a[0].id),e.setState({services:a,concept:a[0].id}))})).catch((function(e){console.log(e)}))}},{key:"onChangeConcept",value:function(e){console.log(e.target.options[e.target.selectedIndex].getAttribute("serviceid")),this.setState({concept:e.target.options[e.target.selectedIndex].getAttribute("serviceid")})}},{key:"onChangeSessions",value:function(e){console.log(e.target.value),this.setState({sessions:e.target.value})}},{key:"saveInvoice",value:function(){var e=this,t={emittedTo:this.state.emittedTo,concept:this.state.concept,sessions:this.state.sessions};console.log(t),Z.create(t).then((function(t){e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"newInvoice",value:function(){var e=this;this.setState((function(t){return{id:null,emittedTo:e.props.match.params.id,counter:t.counter,sessions:1,submitted:!1}}))}},{key:"render",value:function(){var e=this.state,t=e.services,a=e.sessions;return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},i.a.createElement("div",{className:"submit-form"},this.state.submitted?i.a.createElement("div",null,i.a.createElement("h4",null,"Factura creada correctamente!"),i.a.createElement("button",{className:"btn btn-success",onClick:this.newInvoice},"Nueva")):i.a.createElement("div",null,i.a.createElement("div",{className:"form-group"},0===t.length?i.a.createElement("h4",null,"No hay servicios para esta actividad"):"",i.a.createElement(ie.a,null,i.a.createElement(ie.a.Group,{controlId:"exampleForm.ControlSelect2"},i.a.createElement(ie.a.Label,null,"Concepto"),i.a.createElement(ie.a.Control,{as:"select",onChange:this.onChangeConcept},t&&t.map((function(e,t){return i.a.createElement("option",{key:t,serviceid:e.id},e.name)})))),i.a.createElement(ie.a.Group,{controlId:"exampleForm.ControlInput1",onChange:this.onChangeSessions},i.a.createElement(ie.a.Label,null,"Sesiones"),i.a.createElement(ie.a.Control,{type:"text",defaultValue:a})))),i.a.createElement("button",{style:{marginBottom:"25px"},onClick:this.saveInvoice,className:"btn btn-secondary"},"A\xf1adir")))))}}]),a}(n.Component),re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeConcept=n.onChangeConcept.bind(Object(p.a)(n)),n.onChangeSessions=n.onChangeSessions.bind(Object(p.a)(n)),n.saveInvoice=n.saveInvoice.bind(Object(p.a)(n)),n.newInvoice=n.newInvoice.bind(Object(p.a)(n)),n.state={id:null,emittedTo:n.props.match.params.id,concept:"",sessions:1,services:[],submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveServices()}},{key:"retrieveServices",value:function(){var e=this;ne.getAllActivity({activity:"Psicolog\xeda"}).then((function(t){var a=t.data.data;0===a.length?e.setState({services:[]}):(console.log(a[0].id),e.setState({services:a,concept:a[0].id}))})).catch((function(e){console.log(e)}))}},{key:"onChangeConcept",value:function(e){console.log(e.target.options[e.target.selectedIndex].getAttribute("serviceid")),this.setState({concept:e.target.options[e.target.selectedIndex].getAttribute("serviceid")})}},{key:"onChangeSessions",value:function(e){console.log(e.target.value),this.setState({sessions:e.target.value})}},{key:"saveInvoice",value:function(){var e=this,t={emittedTo:this.state.emittedTo,concept:this.state.concept,sessions:this.state.sessions};console.log(t),te.create(t).then((function(t){e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"newInvoice",value:function(){var e=this;this.setState((function(t){return{id:null,emittedTo:e.props.match.params.id,counter:t.counter,sessions:1,submitted:!1}}))}},{key:"render",value:function(){var e=this.state,t=e.services,a=e.sessions;return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},i.a.createElement("div",{className:"submit-form"},this.state.submitted?i.a.createElement("div",null,i.a.createElement("h4",null,"Factura creada correctamente!"),i.a.createElement("button",{className:"btn btn-success",onClick:this.newInvoice},"Nueva")):i.a.createElement("div",null,i.a.createElement("div",{className:"form-group"},0===t.length?i.a.createElement("h4",null,"No hay servicios para esta actividad"):"",i.a.createElement(ie.a,null,i.a.createElement(ie.a.Group,{controlId:"exampleForm.ControlSelect2"},i.a.createElement(ie.a.Label,null,"Concepto"),i.a.createElement(ie.a.Control,{as:"select",onChange:this.onChangeConcept},t&&t.map((function(e,t){return i.a.createElement("option",{key:t,serviceid:e.id},e.name)})))),i.a.createElement(ie.a.Group,{controlId:"exampleForm.ControlInput1",onChange:this.onChangeSessions},i.a.createElement(ie.a.Label,null,"Sesiones"),i.a.createElement(ie.a.Control,{type:"text",defaultValue:a})))),i.a.createElement("button",{style:{marginBottom:"25px"},onClick:this.saveInvoice,className:"btn btn-secondary"},"A\xf1adir")))))}}]),a}(n.Component),le=a(14),oe=le.f.create({container:{flexDirection:"row",alignItems:"stretch",marginTop:60},containerFactura:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#112131",borderBottomStyle:"solid",alignItems:"stretch",marginTop:50},detailColumn:{flexDirection:"column",flexGrow:9,textTransform:"uppercase"},linkColumn:{flexDirection:"column",flexGrow:2,alignSelf:"flex-end",justifySelf:"flex-end"},name:{fontSize:24},address:{fontSize:10},subtitle:{fontSize:10,justifySelf:"flex-end"},image:{width:200,height:107}}),se=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(le.h,{style:oe.container},i.a.createElement(le.h,{style:oe.detailColumn},i.a.createElement(le.b,{src:"/logo_co_2019_ok2peque_NEGRO.jpg",style:oe.image})),i.a.createElement(le.h,{style:oe.linkColumn},i.a.createElement(le.g,{style:oe.address},"Calle Castelao 13-15, bajo"),i.a.createElement(le.g,{style:oe.address},"27001 Lugo"),i.a.createElement(le.g,{style:oe.address},"33535792K"),i.a.createElement(le.g,{style:oe.address},"Telf: 982 203 954"))),i.a.createElement(le.h,{style:oe.containerFactura},i.a.createElement(le.g,{style:oe.name},"Factura")))},me=le.f.create({container:{flexDirection:"row",alignItems:"stretch",marginTop:25},numberColumn:{flexDirection:"column",flexGrow:9,textTransform:"uppercase"},dateColumn:{flexDirection:"column",flexGrow:2,alignSelf:"flex-end",justifySelf:"flex-end",width:30,textAlign:"right"},basicFont:{fontSize:11}}),ue=function(e){return i.a.createElement(le.h,{style:me.container},i.a.createElement(le.h,{style:me.numberColumn},i.a.createElement(le.g,{style:me.basicFont},"N\xfamero: ",e.number)),i.a.createElement(le.h,{style:me.dateColumn},i.a.createElement(le.g,{style:[me.basicFont,{width:100,textAlign:"right"}]},"Fecha: ",e.date)))},de=le.f.create({personalData:{flexDirection:"column",backgroundColor:"#f2f2f2",marginTop:60,paddingLeft:30,paddingBottom:30},containerRow:{flexDirection:"row",alignItems:"stretch",marginTop:20},attribute:{fontSize:11}}),pe=function(e){return i.a.createElement(le.h,{style:de.personalData},i.a.createElement(le.h,{style:de.containerRow},i.a.createElement(le.g,{style:de.attribute},"Nombre: ",e.name," ",e.surname)),i.a.createElement(le.h,{style:de.containerRow},i.a.createElement(le.g,{style:de.attribute},"Direcci\xf3n: ",e.address)),i.a.createElement(le.h,{style:de.containerRow},i.a.createElement(le.g,{style:de.attribute},"DNI: ",e.dni)))},ve=le.f.create({invoiceData:{flexDirection:"column",border:1,alignItems:"stretch",marginTop:60},containerHeaders:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:0},bolding:{fontWeight:900,fontSize:12,textDecoration:"underline",textTransform:"bold"},detailValue:{fontSize:11},containerDetails:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:0}}),he=function(e){return i.a.createElement(le.h,{style:ve.invoiceData},i.a.createElement(le.h,{style:ve.containerHeaders},i.a.createElement(le.h,{style:[ve.detailValue,{width:150,margin:5}]},i.a.createElement(le.g,{style:ve.bolding},"Concepto")),i.a.createElement(le.h,{style:[ve.detailValue,{width:50,margin:5}]},i.a.createElement(le.g,{style:ve.bolding},"Sesiones")),i.a.createElement(le.h,{style:[ve.detailValue,{width:50,margin:5}]},i.a.createElement(le.g,{style:ve.bolding},"IVA")),i.a.createElement(le.h,{style:[ve.detailValue,{width:50,margin:5}]},i.a.createElement(le.g,{style:ve.bolding},"Base")),i.a.createElement(le.h,{style:[ve.detailValue,{width:50,margin:5}]},i.a.createElement(le.g,{style:ve.bolding},"Importe"))),i.a.createElement(le.h,{style:ve.containerDetails},i.a.createElement(le.h,{style:[ve.detailValue,{width:150,margin:5}]},i.a.createElement(le.g,null,e.concept)),i.a.createElement(le.h,{style:[ve.detailValue,{width:50,margin:5}]},i.a.createElement(le.g,null,e.sessions)),i.a.createElement(le.h,{style:[ve.detailValue,{width:50,margin:5}]},i.a.createElement(le.g,null,e.iva)),i.a.createElement(le.h,{style:[ve.detailValue,{width:50,margin:5}]},i.a.createElement(le.g,null,e.base)),i.a.createElement(le.h,{style:[ve.detailValue,{width:50,margin:5}]},i.a.createElement(le.g,null,e.total))))},ge=le.f.create({footerText:{fontSize:8},footer:{flexDirection:"row",alignItems:"stretch",marginTop:100}}),fe=function(){return i.a.createElement(le.h,{style:ge.footer},i.a.createElement(le.g,{style:ge.footerText},"De conformidad con la Ley Org\xe1nica 15/1999 de Protecci\xf3n de Datos, CENTRO OTOMO le informa de que sus datos personales est\xe1n incluidos en un fichero denominado FICHERO DE DATOS DE PACIENTES inscrito en la Agencia Espa\xf1ola de Protecci\xf3n de Datos y cuya finalidad es la GESTI\xd3N DE PACIENTES, pudiendo ejercitar sus derechos de OPOSICI\xd3N, ACCESO, RECTIFICACI\xd3N Y/O CANCELACI\xd3N mediante escrito a: CENTRO OTOMO, calle Castelao 13-15, bajo, 27001 Lugo,indicando por escrito su petici\xf3n y adjuntando fotocopia de DNI o en su defecto doccumento que acredite su debida identidad."))},be=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={invoiceData:{},id:0},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.location.state.invoice,t=new Date(e.createdAt),a=t.getDate(),n=t.getMonth()+1,c=t.getFullYear(),r="".concat(e.inumber,"/").concat(c),l="".concat(a,"-").concat(n,"-").concat(c),o=le.f.create({page:{padding:30}});return i.a.createElement("div",{className:"row"},i.a.createElement(le.d,{key:Math.random(),style:{width:800,height:1300}},i.a.createElement(le.a,{author:"Centro Otomo",keywords:"acupuntura, psicolog\xeda",subject:"Factura",title:"Factura"},i.a.createElement(le.e,{size:"A4",style:o.page},i.a.createElement(se,null),i.a.createElement(ue,{number:r,date:l}),i.a.createElement(pe,{name:e.name,surname:e.surname,address:e.address,dni:e.dni}),i.a.createElement(he,{concept:e.concept,sessions:e.sessions,iva:e.iva,base:e.base,total:e.total}),i.a.createElement(fe,null)))))}}]),a}(n.Component),Ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={invoiceData:{},id:0},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.location.state.invoice,t=new Date(e.createdAt),a=t.getDate(),n=t.getMonth()+1,c=t.getFullYear(),r="".concat(e.inumber,"/").concat(c),l="".concat(a,"-").concat(n,"-").concat(c),o=function(){return i.a.createElement(le.a,{author:"Centro Otomo",keywords:"acupuntura, psicolog\xeda",subject:"Factura",title:"Factura"},i.a.createElement(le.e,{size:"A4",style:s.page},i.a.createElement(se,null),i.a.createElement(ue,{number:r,date:l}),i.a.createElement(pe,{name:e.name,surname:e.surname,address:e.address,dni:e.dni}),i.a.createElement(he,{concept:e.concept,sessions:e.sessions,iva:e.iva,base:e.base,total:e.total}),i.a.createElement(fe,null)))},s=le.f.create({page:{padding:30}});return i.a.createElement("div",{className:"row"},i.a.createElement(le.c,{document:i.a.createElement(o,null),fileName:"".concat(r,"-").concat(l," .pdf")},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Cargando documento...":"Descargar ahora!"})))}}]),a}(n.Component),ye=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={invoiceData:{},id:0},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.location.state.invoice,t=new Date(e.createdAt),a=t.getDate(),n=t.getMonth()+1,c=t.getFullYear(),r="".concat(e.inumber,"/").concat(c),l="".concat(a,"-").concat(n,"-").concat(c),o=le.f.create({page:{padding:30}});return i.a.createElement("div",{className:"row"},i.a.createElement(le.d,{key:Math.random(),style:{width:800,height:1300}},i.a.createElement(le.a,{author:"Centro Otomo",keywords:"acupuntura, psicolog\xeda",subject:"Factura",title:"Factura"},i.a.createElement(le.e,{size:"A4",style:o.page},i.a.createElement(se,null),i.a.createElement(ue,{number:r,date:l}),i.a.createElement(pe,{name:e.name,surname:e.surname,address:e.address,dni:e.dni}),i.a.createElement(he,{concept:e.concept,sessions:e.sessions,iva:e.iva,base:e.base,total:e.total}),i.a.createElement(fe,null)))))}}]),a}(n.Component),Ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={invoiceData:{},id:0},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.location.state.invoice,t=new Date(e.createdAt),a=t.getDate(),n=t.getMonth()+1,c=t.getFullYear(),r="".concat(e.inumber,"/").concat(c),l="".concat(a,"-").concat(n,"-").concat(c),o=function(){return i.a.createElement(le.a,{author:"Centro Otomo",keywords:"acupuntura, psicolog\xeda",subject:"Factura",title:"Factura"},i.a.createElement(le.e,{size:"A4",style:s.page},i.a.createElement(se,null),i.a.createElement(ue,{number:r,date:l}),i.a.createElement(pe,{name:e.name,surname:e.surname,address:e.address,dni:e.dni}),i.a.createElement(he,{concept:e.concept,sessions:e.sessions,iva:e.iva,base:e.base,total:e.total}),i.a.createElement(fe,null)))},s=le.f.create({page:{padding:30}});return i.a.createElement("div",{className:"row"},i.a.createElement(le.c,{document:i.a.createElement(o,null),fileName:"".concat(r,"-").concat(l," .pdf")},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Cargando documento...":"Descargar ahora!"})))}}]),a}(n.Component);E.a.locale("es");var Ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).retrieveObservations=n.retrieveObservations.bind(Object(p.a)(n)),n.deleteObservation=n.deleteObservation.bind(Object(p.a)(n)),n.sortObs=n.sortObs.bind(Object(p.a)(n)),n.sortObsInv=n.sortObsInv.bind(Object(p.a)(n)),n.state={id:n.props.match.params.id,observations:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveObservations()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"retrieveObservations",value:function(){var e=this,t=this.state.id;f.findObservations(t).then((function(t){var a=t.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}));e.setState({observations:a})})).catch((function(e){console.log(e)}))}},{key:"deleteObservation",value:function(e){var t=this,a=e.target.getAttribute("aid");f.deleteObservation(this.state.id,a).then((function(e){var a=t.state.observations.filter((function(t){return t.id!==e.data.observation}));console.log(a),t.setState({observations:a})})).catch((function(e){console.log(e)}))}},{key:"sortObs",value:function(){var e=this.state.observations.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}));this.setState({observations:e})}},{key:"sortObsInv",value:function(){var e=this.state.observations.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)}));this.setState({observations:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.id,n=t.observations;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row",style:{marginTop:"10px"}},i.a.createElement("div",{className:"col-6",style:{marginBottom:"10px"}},i.a.createElement(j.a,{href:"/patients/".concat(a,"/obs/new"),variant:"secondary"},"Nueva")),i.a.createElement("div",{className:"col-6",style:{marginBottom:"10px",display:"flex",justifyContent:"flex-end"}},i.a.createElement("div",null,[V.a].map((function(t,a){return i.a.createElement(t,{as:D.a,key:a,id:"dropdown-button-drop-".concat(a),variant:"secondary",title:"Ordernar"},i.a.createElement(A.a.Item,{eventKey:"1",onClick:e.sortObs},"Recientes"),i.a.createElement(A.a.Divider,null),i.a.createElement(A.a.Item,{eventKey:"2",onClick:e.sortObsInv},"Antiguos"))}))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},n&&n.map((function(t,a){return i.a.createElement(G.a,{style:{marginBottom:"10px"},key:a},i.a.createElement(G.a.Body,null,i.a.createElement(G.a.Title,null,E()(t.createdAt).format("DD/MM/YYYY - hh:mm:ss")),i.a.createElement(G.a.Subtitle,{className:"mb-2 text-muted"}),i.a.createElement(G.a.Text,null,t.note,i.a.createElement("br",null)),i.a.createElement(G.a.Link,{href:"#",aid:t.id,arrindx:a,onClick:e.deleteObservation},"Borrar")))})),i.a.createElement("p",null,"\xa0"))))}}]),a}(n.Component),ke=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeNote=n.onChangeNote.bind(Object(p.a)(n)),n.addObservation=n.addObservation.bind(Object(p.a)(n)),n.state={id:n.props.match.params.id,note:"",success:!1},n}return Object(s.a)(a,[{key:"onChangeNote",value:function(e){this.setState({note:e.target.value})}},{key:"addObservation",value:function(){var e=this,t={note:this.state.note};f.addObservation(this.state.id,t).then((function(t){e.setState({success:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.state.success?i.a.createElement(d.a,{to:"/patients/".concat(this.state.id,"/obs")}):i.a.createElement("div",{className:"submit-form"},this.state.submitted?i.a.createElement("div",null,i.a.createElement("h4",null,"A\xf1adido correctamente!"),i.a.createElement("button",{className:"btn btn-success",onClick:this.newPatient},"Nuevo")):i.a.createElement("div",null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"note"},"Note"),i.a.createElement("textarea",{type:"text",className:"form-control",id:"note",required:!0,value:this.state.note,onChange:this.onChangeNote,name:"note",rows:"10"})),i.a.createElement("button",{style:{marginBottom:"25px"},onClick:this.addObservation,className:"btn btn-secondary"},"Guardar")))}}]),a}(n.Component),xe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).retrieveServices=n.retrieveServices.bind(Object(p.a)(n)),n.state={services:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.retrieveServices()}},{key:"retrieveServices",value:function(){var e=this;ne.getAll({}).then((function(t){var a=t.data.data;e.setState({services:a})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.services;return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},e&&e.map((function(e,t){return i.a.createElement("div",{className:"row",key:t,style:{marginTop:"10px"}},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("p",null,"Servicio: ",e.name),i.a.createElement("p",null,"Actividad: ",e.activity),i.a.createElement("p",null,"IVA: ",e.iva),i.a.createElement("p",null,"Coste: ",e.cost))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement(j.a,{variant:"secondary",href:"/services/"+e.id},"Modificar")))))))}))))}}]),a}(n.Component),Oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeIVA=n.onChangeIVA.bind(Object(p.a)(n)),n.onChangeName=n.onChangeName.bind(Object(p.a)(n)),n.onChangeActivity=n.onChangeActivity.bind(Object(p.a)(n)),n.createService=n.createService.bind(Object(p.a)(n)),n.newService=n.newService.bind(Object(p.a)(n)),n.onChangeCost=n.onChangeCost.bind(Object(p.a)(n)),n.state={name:"",iva:0,cost:0,submitted:!1,activity:""},n}return Object(s.a)(a,[{key:"onChangeIVA",value:function(e){this.setState({iva:e.target.value})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeCost",value:function(e){this.setState({cost:e.target.value})}},{key:"onChangeActivity",value:function(e){this.setState({activity:e.target.value})}},{key:"createService",value:function(){var e=this,t={iva:this.state.iva,name:this.state.name,cost:this.state.cost,activity:this.state.activity};ne.create(t).then((function(t){e.setState({submitted:!0}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"newService",value:function(){this.setState({name:"",iva:0,cost:0,submitted:!1,activity:""})}},{key:"render",value:function(){return i.a.createElement("div",{className:"row"},"dff",i.a.createElement("div",{className:"col-12",style:{marginTop:"10px"}},i.a.createElement("div",{className:"submit-form"},this.state.submitted?i.a.createElement("div",null,i.a.createElement("h4",null,"Servicio a\xf1adido correctamente!"),i.a.createElement("button",{className:"btn btn-success",onClick:this.newService},"Nuevo")):i.a.createElement("div",null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"name"},"Servicio"),i.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"activity"},"Actividad"),i.a.createElement("input",{type:"text",className:"form-control",id:"activity",required:!0,value:this.state.activity,onChange:this.onChangeActivity,name:"activity"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"iva"},"IVA"),i.a.createElement("input",{type:"text",className:"form-control",id:"iva",required:!0,value:this.state.iva,onChange:this.onChangeIVA,name:"iva"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"cost"},"Coste"),i.a.createElement("input",{type:"text",className:"form-control",id:"cost",required:!0,value:this.state.cost,onChange:this.onChangeCost,name:"cost"})),i.a.createElement("button",{style:{marginBottom:"25px"},onClick:this.createService,className:"btn btn-secondary"},"A\xf1adir")))))}}]),a}(n.Component),Se=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeIVA=n.onChangeIVA.bind(Object(p.a)(n)),n.onChangeName=n.onChangeName.bind(Object(p.a)(n)),n.onChangeCost=n.onChangeCost.bind(Object(p.a)(n)),n.updateService=n.updateService.bind(Object(p.a)(n)),n.state={id:null,name:"",iva:0,cost:0,submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getService(this.props.match.params.id)}},{key:"getService",value:function(e){var t=this;ne.get(e).then((function(e){console.log(e.data),t.setState({id:e.data.id,name:e.data.name,iva:e.data.iva,cost:e.data.cost})})).catch((function(e){console.log(e)}))}},{key:"onChangeIVA",value:function(e){this.setState({iva:e.target.value})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeCost",value:function(e){this.setState({cost:e.target.value})}},{key:"updateService",value:function(){var e=this,t={iva:this.state.iva,name:this.state.name,cost:this.state.cost};ne.update(this.state.id,t).then((function(t){e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"row",style:{marginTop:"10px"}},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"submit-form"},this.state.submitted?i.a.createElement(d.a,{to:"/services"}):i.a.createElement("div",null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"title"},"Servicio"),i.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"iva"},"IVA"),i.a.createElement("input",{type:"text",className:"form-control",id:"iva",required:!0,value:this.state.iva,onChange:this.onChangeIVA,name:"iva"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"cost"},"Coste"),i.a.createElement("input",{type:"text",className:"form-control",id:"cost",required:!0,value:this.state.cost,onChange:this.onChangeCost,name:"cost"})),i.a.createElement("button",{style:{marginBottom:"25px"},onClick:this.updateService,className:"btn btn-secondary"},"Actualizar")))))}}]),a}(n.Component),je=a(175),De=a(272),Ae=a(84),Pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{bg:"dark",variant:"dark",fixed:"top"},i.a.createElement(je.a.Brand,{href:"/patients"},"Otomo"),i.a.createElement(je.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(je.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(De.a,{className:"mr-auto"},i.a.createElement(De.a.Link,{href:"/appointments"},"Citas"),i.a.createElement(Ae.a,{alignRight:!0,title:"Pacientes",id:"basic-nav-dropdown"},i.a.createElement(Ae.a.Item,{href:"/patients"},"Buscar"),i.a.createElement(Ae.a.Divider,null),i.a.createElement(Ae.a.Item,{href:"/add"},"Nuevo")),i.a.createElement(Ae.a,{alignRight:!0,title:"Facturas",id:"basic-nav-dropdown"},i.a.createElement(Ae.a.Item,{href:"/invoices"},"Facturas Acupuntura"),i.a.createElement(Ae.a.Item,{href:"/invoicespsico"},"Facturas Psicolog\xeda"),i.a.createElement(Ae.a.Divider,null),i.a.createElement(Ae.a.Item,{href:"/services"},"Servicios"),i.a.createElement(Ae.a.Item,{href:"/addservice"},"Nuevo Servicio"))))),i.a.createElement("div",{className:"container"},i.a.createElement(l.a,null,i.a.createElement(d.d,null,i.a.createElement(d.b,{exact:!0,path:["/","/appointments"],component:L}),i.a.createElement(d.b,{exact:!0,path:["/","/appointments/after/:selected"],component:L}),i.a.createElement(d.b,{exact:!0,path:"/addappointment/:id",component:H}),i.a.createElement(d.b,{path:"/appointments/patient/:id",component:Q}),i.a.createElement(d.b,{exact:!0,path:["/","/patients"],component:T}),i.a.createElement(d.b,{exact:!0,path:["/","/patients/appoint/:id"],component:T}),i.a.createElement(d.b,{exact:!0,path:"/add",component:y}),i.a.createElement(d.b,{exact:!0,path:"/patients/:id",component:x}),i.a.createElement(d.b,{exact:!0,path:"/patients/:id/obs",component:Ne}),i.a.createElement(d.b,{path:"/patients/:id/obs/new",component:ke}),i.a.createElement(d.b,{exact:!0,path:["/","/invoicespsico"],component:ae}),i.a.createElement(d.b,{exact:!0,path:"/addinvoicepsico/:id",component:re}),i.a.createElement(d.b,{exact:!0,path:"/invoicespsicomobile/pdf/:id",component:Ce}),i.a.createElement(d.b,{exact:!0,path:"/invoicespsico/pdf/:id",component:ye}),i.a.createElement(d.b,{exact:!0,path:["/","/invoices"],component:ee}),i.a.createElement(d.b,{exact:!0,path:"/addinvoice/:id",component:ce}),i.a.createElement(d.b,{path:"/invoicesmobile/pdf/:id",component:Ee}),i.a.createElement(d.b,{path:"/invoices/pdf/:id",component:be}),i.a.createElement(d.b,{exact:!0,path:["/","/services"],component:xe}),i.a.createElement(d.b,{exact:!0,path:"/addservice",component:Oe}),i.a.createElement(d.b,{exact:!0,path:"/services/:id",component:Se})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=a(359),we=a(224);Ie.a.add(we.b,we.a,we.c),r.a.render(i.a.createElement(l.a,null,i.a.createElement(Pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[376,1,2]]]);